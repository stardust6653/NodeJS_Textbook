# NodeJS 시작하기

## 정의
> [NodeJS 공식사이트](https://nodejs.org/ko/) 설명 : NodeJS는 Chrome V8 Javascript 엔진으로 빌드된 Javascript 런타임

## 핵심개념
1. 서버
> 네트워크를 통해 클라이언트에 정보나 서비스를 제공하는 컴퓨터 또는 프로그램

<br/>

2. 자바스크립트 런타임
> 특정언어(자바스크립트)로 만든 프로그램들을 실행할 수 있는 환경.<br/>
NodeJS는 일종의 자바스크립트 실행기

<br/>

3. 이벤트 기반
> 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식

4. 이벤트 루프
> 코드의 실행, 이벤트의 수집과 처리, 큐에 대기 중인 하위 작업을 처리하는 모델<br/>
> 이벤트 루프가 호출스택을 계속 주시하고 있다가 호출 스택이 비어있으면 먼저 들어온 순서대로 큐에 있는 함수들을 호출 스택으로 집어넣는다. 
- 호출스택(stack) : 함수가 호출되는 순서대로 쌓이는 스택
1. 함수 실행 시 호출 스택에 해당 함수(의 실행 문맥)를 집어넣음
2. 함수 return시 (함수의 실행이 끝날 시) 호출 스택의 맨 위에 있는 해당 함수를 끄집어냄
3. 호출 스택이 빈다는 표현은 실행할 함수가 남아있지 않다는 뜻
- 힙(heap) : 메모리의 큰, 대부분 구조화되지 않은 영역을 지칭하는 용어로 변수 등이 저장됨
- 백그라운드(background) : setTimeout 같은 타이머나 이벤트 리스너 등 webAPI와 몇 종류의 함수들이 대기하는 곳이며 싱글스레드언어인 자바스크립트와는 별개로 이곳에서는 몇가지 작업이 동시에 실행될 수 있음
- 큐(queue) : 처리할 메시지의 대기열

 ```JS
  function first(){
    second();
    console.log('첫 번째')
  }
  function second(){
    third();
    console.log('두 번째')
  }
  function third(){
    console.log('세 번째')
  }
  first();

  /*
    first 함수가 실행되어 스택에 쌓인 후 first 함수 내부에 있는 second 함수가 실행됨.
    동일하게 second 함수도 first 함수 위로 호출스택에 쌓이고 third()가 실행됨
    이후 가장 위에 쌓인 순서대로 실행이 되며 리턴되게 되는데, 가장 마지막에 쌓인 third - second - first 순으로 console.log가 실행되게 되어 결과값으로는

    세 번째
    두 번째
    첫 번째
    
    가 출력됨.
  */
 ```

 5. 논 블로킹 I/O
 > 이전 작업이 완료될 때까지 대기하지 않고 다음 작업을 수행함
 - NodeJS는 I/O(입력/출력) 작업을 백그라운드로 넘겨 동시에 처리하는 경우가 있으며, 이 때 동시에 처리되는 일들이 효율적일 수 있도록 동시 처리가능 작업들을 최대한 묶어서 백그라운드로 넘겨야 시간절약이 가능하다.
 
```JS
  //블로킹

   function longRunningTask(){
     // 오래 걸리는 작업
     console.log('작업 끝')
   }

   console.log('작업 시작')
   longRunningTask()
   console.log('다음 작업')

  /*
    결과

    작업 시작
    작업 끝
    다음 작업

    논블로킹되지 않아 긴작업이 끝날 때까지 console.log('다음 작업')이 실행되지 못함.
  */
 
  //논 블로킹

  function longRunningTask(){
     // 오래 걸리는 작업
     console.log('작업 끝')
   }

   console.log('작업 시작')
   setTimeout(longRunningTask, 0)
   console.log('다음 작업')

   /*
    결과

    작업 시작
    다음 작업
    작업 끝

    setTimeout은 백그라운드로 넘겨져므로 먼저 처리가능한 console.log('작업 시작')과 console.log('다음 작업')이 모두 실행된 후 콜백 큐로 넘겨져 이벤트 루프되어 console.log('작업 끝')이 실행된다.
  */
```

6. 싱글 스레드
> 스레드는 프로세스 내에서 실행되는 흐름의 단위이며, JS의 경우 일반적으로 싱글 스레드 언어로 불리지만, 엄밀히 말하면 노드 실행 시 프로세스가 하나 생성되고 이 때 생선된 여러 스레드들 중 제어 가능한 스레드가 1개일 뿐이다.
